<%= render partial: "shared/settingheader" %>

<div class="main">
  <div class="content">
    <div class="tab_content news group">

      <div class="right_main">
        <div class="wizard">
					<span class="btn_operate"><a href="/roles">返回列表</a></span><a href="/settings">系统设置</a>&nbsp;&gt;&nbsp;<a href="/roles">权限设置</a>&nbsp;&gt;&nbsp;创建角色
        </div>

        <form id="form_main" action="/roles" method="post">
          <input name="authenticity_token" type="hidden" value="<%= form_authenticity_token %>" />
          <div class="inner_form">
            <div class="review_txt"><label>角色名：</label><input name="role[name]" type="text" ></div>

						<div class="review_txt"><label>权  限：</label></div>
						<%- Role::AUTH.each do |key, value| %>
							<div class="review_txt">
								<div class="pos_checkbox fl zhu_ch">
									<input class="zhu zhu_<%= key %>" type="checkbox">
									<span><%= value %></span>
									<div class="pos_checkbox fl cong cong_<%= key %>">
										<input name="role[auth][<%= key %>][read]" class="cong cong_read" type="checkbox">
										<span>查看</span>
										<input name="role[auth][<%= key %>][destroy]" class="cong cong_destroy" type="checkbox">
										<span>删除</span>
										<input name="role[auth][<%= key %>][comment]" class="cong cong_comment" type="checkbox">
										<span>回复</span>
										<input name="role[auth][<%= key %>][create]" class="cong cong_create" type="checkbox">
										<span>新增</span>
										<input name="role[auth][<%= key %>][edit]" class="cong cong_edit" type="checkbox">
										<span>编辑</span>
									</div>
								</div>
							</div>
						<% end %>
          </div>

					<div class="page_bar btn_all">
						<input class="all_check" type="button" value="全选" />
						<input class="all_clear" type="button" value="清除" />
					</div>
					<div class="page_bar">
						<input type="submit" value="保存" />
						<!-- <input type="submit" value="关闭" /> -->
					</div>
        </form>
      </div><!--right_main ends-->
      <div class="clear"></div>
    </div><!--news tab ends-->
  </div>
</div><!--main ends-->
<script>
	$("input.all_check").click(function(){
		$("input[type=checkbox]").attr("checked", "checked");
		return false
	})
	$("input.all_clear").click(function(){
		$("input[type=checkbox]").removeAttr("checked");
		return false
	})
	$("input.cong").click(function(){
		$(this).parents("div.zhu_ch").find("input.zhu").removeAttr("checked")
	})
	$("input.zhu").click(function(){
		if($(this).attr("checked") == "checked"){
			$(this).parent().find("div.cong input[type=checkbox]").attr("checked", "checked")
		} else {
			$(this).parent().find("div.cong input[type=checkbox]").removeAttr("checked")
		}
	})
</script>
